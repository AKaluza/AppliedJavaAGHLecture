# **Behavior-Driven Development (BDD)**

## **1. What Is Behavior-Driven Development?**

> **Definition:**
> Behavior-Driven Development (**BDD**) is an evolution of **Test-Driven Development (TDD)** that focuses on **system behavior** rather than implementation details.

BDD describes how the **system should behave from the user’s perspective**, expressed in a **natural language** understood by both developers and non-technical stakeholders.

  **In short:**

> TDD tests code.
> BDD tests behavior.

---

### **1.1 Motivation**

Traditional TDD tests are written in code:

```java
assertEquals(5, calculator.add(2, 3));
```

Stakeholders often cannot interpret such tests.
BDD bridges the communication gap by describing scenarios in **business-friendly language**.

 *Discussion:*
*What happens when developers and business analysts understand “tests” differently?*

---

## **2. BDD Principles**

1. **Shared understanding** — tests are written in a common language.
2. **Focus on behavior** — describe *what the system should do*, not *how it does it*.
3. **Living documentation** — scenarios act as both tests and project documentation.
4. **Outside-in development** — start from user behavior, work toward implementation.

---

## **3. The BDD Cycle**

The BDD workflow extends the TDD “Red-Green-Refactor” cycle:

```
DISCOVER → DEFINE → IMPLEMENT → VERIFY
```

| Phase         | Description                                 |
| ------------- | ------------------------------------------- |
| **Discover**  | Collaboratively identify desired behaviors. |
| **Define**    | Write scenarios describing those behaviors. |
| **Implement** | Write code that makes the scenarios pass.   |
| **Verify**    | Run automated acceptance tests regularly.   |

  **Analogy:**
BDD = *“Test-Driven Development with better conversations.”*

---

## **4. The Gherkin Language**

Scenarios in BDD are usually written using **Gherkin syntax**, supported by frameworks like **Cucumber**, **JBehave**, or **Serenity BDD**.

Each test scenario is expressed in **Given-When-Then** structure:

```gherkin
Feature: Calculator
  Scenario: Addition of two numbers
    Given the calculator is turned on
    When the user adds 2 and 3
    Then the result should be 5
```

* **Given** – preconditions or initial context
* **When** – action or event
* **Then** – expected outcome


---

## **5. Implementing BDD in Java with Cucumber**

### **5.1 Feature File**

`calculator_addition.feature`

```gherkin
Feature: Calculator Operations
  Scenario: Addition
    Given the calculator is started
    When I add 2 and 3
    Then the result should be 5
```

---

### **5.2 Step Definitions (Java)**

`CalculatorSteps.java`

```java
import io.cucumber.java.en.*;
import static org.junit.jupiter.api.Assertions.*;

public class CalculatorSteps {
    private Calculator calculator;
    private int result;

    @Given("the calculator is started")
    public void startCalculator() {
        calculator = new Calculator();
    }

    @When("I add {int} and {int}")
    public void addNumbers(int a, int b) {
        result = calculator.add(a, b);
    }

    @Then("the result should be {int}")
    public void verifyResult(int expected) {
        assertEquals(expected, result);
    }
}
```

---

### **5.3 The Implementation Code**

`Calculator.java`

```java
public class Calculator {
    public int add(int a, int b) {
        return a + b;
    }
}
```

*Lab follow-up:*
Extend the feature with *subtraction* and *division* scenarios, then implement corresponding steps.

---

## **6. How BDD Differs from TDD**

| Aspect           | TDD                          | BDD                                      |
| ---------------- | ---------------------------- | ---------------------------------------- |
| **Focus**        | Implementation correctness   | Business behavior                        |
| **Language**     | Programming language (JUnit) | Natural language (Gherkin)               |
| **Participants** | Developers                   | Developers + Testers + Business Analysts |
| **Tests are**    | Unit tests                   | Acceptance / integration tests           |
| **Output**       | Verified code                | Verified behavior + living documentation |

  **Example comparison:**

**TDD test:**

```java
assertEquals(5, calc.add(2, 3));
```

**BDD scenario:**

```gherkin
When I add 2 and 3
Then I see the result 5
```

---

## **7. BDD Tools and Frameworks in Java**

| Tool             | Purpose                                    | Notes                                      |
| ---------------- | ------------------------------------------ | ------------------------------------------ |
| **Cucumber**     | Most popular BDD framework                 | Uses Gherkin syntax; integrates with JUnit |
| **JBehave**      | Original Java BDD framework                | Similar structure, different annotations   |
| **Serenity BDD** | Extends Cucumber/JBehave with reports      | Generates rich HTML living documentation   |
| **JUnit 5**      | Often combined for lower-level unit checks | Not BDD by itself but compatible           |



## **8. Example Project Structure**

```
src/
 ├── main/java/com/example/
 │    └── Calculator.java
 └── test/java/com/example/
      ├── stepdefinitions/
      │     └── CalculatorSteps.java
      └── resources/
            └── features/
                 └── calculator_addition.feature
```

Test runner (JUnit 5 with Cucumber):

```java
import io.cucumber.junit.platform.engine.Cucumber;

@Cucumber
public class RunCucumberTest {
    // JUnit 5 entry point
}
```

---

## **9. Advantages of BDD**

| Advantage                    | Description                                          |
| ---------------------------- | ---------------------------------------------------- |
| **Shared understanding**     | Non-technical stakeholders can read tests.           |
| **Reduced miscommunication** | Business rules are explicitly documented.            |
| **Regression coverage**      | Scenarios act as regression tests.                   |
| **Living documentation**     | Always up to date with current behavior.             |
| **Better design**            | Encourages modular, testable, behavior-focused code. |

  *Reflection:*
BDD naturally aligns software design with *domain-driven design (DDD)* principles.

---

## **10. Common Pitfalls**

| Pitfall                             | Explanation                                  |
| ----------------------------------- | -------------------------------------------- |
| **Writing scenarios too low-level** | Avoid technical detail; focus on user value. |
| **Overusing Gherkin**               | Not every test needs natural language.       |
| **Poor collaboration**              | BDD is about communication, not just syntax. |
| **Ambiguous steps**                 | Each step should have one clear meaning.     |
| **Unmaintained feature files**      | Outdated “documentation” becomes misleading. |





## **11. Summary**

* **BDD** builds upon **TDD**, shifting focus from *testing code* to *specifying behavior*.
* **Gherkin** allows writing test scenarios in a shared language.
* **Cucumber/JBehave/Serenity** integrate natural-language scenarios with executable Java code.
* When used properly, BDD leads to **clearer communication**, **better-aligned software**, and **living documentation**.

---

## **12. Recommended Reading**

1. **Dan North**, “Introducing BDD” (original article)
   [https://dannorth.net/introducing-bdd/](https://dannorth.net/introducing-bdd/)
2. **John Ferguson Smart**, *BDD in Action*, Manning Publications, 2015.
3. **Seb Rose**, *The Cucumber Book*, Pragmatic Bookshelf, 2017.
4. **Martin Fowler**, “Given-When-Then” (blog).
5. **Cucumber Docs:** [https://cucumber.io/docs](https://cucumber.io/docs)
